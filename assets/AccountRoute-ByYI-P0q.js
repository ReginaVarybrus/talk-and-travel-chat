import{u as t,d as j,e as N,a as k,b as d,j as e,L as R,s as w,r as y,h as L}from"./index-D0WfsdIb.js";import{c as B,a as c,u as E,I as p,d as P,S as z}from"./InputField-CuViFyPL.js";import{c as F,d as T,L as M,u as O}from"./index-DgdveYHB.js";import{a as b,B as m}from"./BasicButton-B1jUvGiM.js";import{u as U}from"./useDispatch-DkP78ten.js";import"./isSymbol-CYvIzdD2.js";import"./TextareaAutosize-BtOMs-fs.js";import"./useForkRef-CF61RznM.js";import"./index-UMPKK3DI.js";import"./iconBase-regwSDtz.js";import"./ButtonBase-DRrItzvB.js";const $=t.section.withConfig({displayName:"AccountRouteStyled__ProfileStyled",componentId:"sc-1i7s4sw-0"})(["background-color:var(--color-grey-3);height:100vh;border-left:1px solid var(--color-grey-6);@media (max-width:767px){padding:16px 24px 0 24px;border-left:none;}"]),H=t.div.withConfig({displayName:"AccountRouteStyled__Header",componentId:"sc-1i7s4sw-1"})(["height:77px;background-color:var(--white-color);border-bottom:solid 1px var(--color-grey-6);@media (max-width:767px){display:none;}"]),V=t.h5.withConfig({displayName:"AccountRouteStyled__Title",componentId:"sc-1i7s4sw-2"})(["padding:24px 32px;font-size:24px;font-weight:600;line-height:28.8px;"]),q=t.div.withConfig({displayName:"AccountRouteStyled__ProfileContainer",componentId:"sc-1i7s4sw-3"})(['max-width:1045px;background-color:var(--white-color);display:grid;grid-template-columns:auto 2fr auto;grid-template-areas:"avatar form edit";margin:32px;border-radius:16px;padding:32px;min-height:320px;box-sizing:border-box;@media (max-width:767px){grid-template-columns:1fr auto;grid-template-areas:"avatar edit"  "form form" "logout logout";margin:0;padding:0;width:100%;}']),D=t.div.withConfig({displayName:"AccountRouteStyled__AvatarBlock",componentId:"sc-1i7s4sw-4"})(["text-align:center;grid-area:avatar;@media (max-width:767px){display:flex;margin:12px 12px 24px 12px;}"]),X=t.div.withConfig({displayName:"AccountRouteStyled__Avatar",componentId:"sc-1i7s4sw-5"})(["width:256px;height:256px;border-radius:8px;background-color:var(--color-grey-12);@media (max-width:767px){width:64px;height:64px;}"]);t(b).withConfig({displayName:"AccountRouteStyled__ChangeAvatar",componentId:"sc-1i7s4sw-6"})(["padding-top:8px;color:var(--color-brand-blue);width:120px;@media (max-width:767px){padding:8px 16px;}"]);const W=t.div.withConfig({displayName:"AccountRouteStyled__InputBlock",componentId:"sc-1i7s4sw-7"})(["grid-area:form;margin:0px 48px;min-width:300px;@media (max-width:767px){margin:0px 12px;min-width:200px;}"]),Z=t.form.withConfig({displayName:"AccountRouteStyled__ProfileForm",componentId:"sc-1i7s4sw-8"})(["@media (max-width:767px){display:flex;flex-direction:column;}"]),G=t.p.withConfig({displayName:"AccountRouteStyled__TextAbout",componentId:"sc-1i7s4sw-9"})(["hyphens:auto;word-wrap:break-word;white-space:pre-wrap;padding:18px 16px;font-size:18px;font-weight:400;line-height:21.6px;text-align:left;border:1px solid;border-color:transparent;"]),J=t(F).withConfig({displayName:"AccountRouteStyled__EditPencilIcon",componentId:"sc-1i7s4sw-10"})(["width:18px;height:18px;color:var(--color-grey-9);"]),K=t(T).withConfig({displayName:"AccountRouteStyled__CloseIcon",componentId:"sc-1i7s4sw-11"})(["width:20px;height:20px;color:var(--color-grey-9);"]),Q=t.button.withConfig({displayName:"AccountRouteStyled__EditButton",componentId:"sc-1i7s4sw-12"})(["grid-area:edit;width:18px;height:18px;background-color:var(--white-color);border:none;outline:none;cursor:pointer;@media (max-width:768px){margin:14.5px 14.5px 0 0;}"]),Y=t.div.withConfig({displayName:"AccountRouteStyled__ChoiceButtonBlock",componentId:"sc-1i7s4sw-13"})(["display:grid;gap:16px;grid-template-columns:92px 92px auto;@media (max-width:768px){display:grid;gap:19px;grid-template-columns:1fr 1fr;padding-bottom:12px;}"]),ee=t(b).withConfig({displayName:"AccountRouteStyled__LogoutButton",componentId:"sc-1i7s4sw-14"})(["&&{margin-top:24px;width:100%;height:48px;padding:12px 0;border-radius:8px;background-color:var(--white-color);cursor:pointer;color:var(--color-system-error);text-transform:none;font-size:14px;line-height:19.6px;@media (min-width:768px){display:none;}}"]),te=t(M).withConfig({displayName:"AccountRouteStyled__LogoutIcon",componentId:"sc-1i7s4sw-15"})(["width:24px;height:24px;margin:12px 12px 12px 0;"]),s=200,oe=B().shape({userName:c().transform(o=>o?o.trim():"").min(2,"name must be more then 1 symbol").max(30,"to long").matches(/^[a-zA-Z0-9 ]{2,30}$/,"invalid name").required("the field is empty"),userEmail:c().transform(o=>o?o.trim():"").email().matches(/^([a-z0-9_.-]+)@([a-z09_.-]+).([a-z]{2,6})$/,"invalid email address").required("the field is empty"),about:c().max(s,`this field should be less then ${s} symbols`)}),u={userName:{general:"userName",type:"text",label:"Name",placeholder:"please enter your name"},userEmail:{general:"userEmail",type:"email",label:"E-mail",placeholder:"please enter your e-mail"},about:{general:"about",type:"textarea",label:"About",placeholder:""}},he=()=>{const o=j(N),h=U(),x=k(),{handleDeactivateStopmClient:v}=O(),[a,l]=d.useState(!1),[C,g]=d.useState(!1),i=E({initialValues:o,validationSchema:oe,validateOnChange:!1,enableReinitialize:!0,onSubmit:async(n,{resetForm:I})=>{g(!0);try{const r=await h(w(n));w.fulfilled.match(r)?(x(y.ACCOUNT),I(),l(!1)):console.error("Update Failed:",r.error)}catch(r){console.error("Something went wrong:",r)}finally{g(!1)}}}),_=()=>{l(!a)},f=()=>{i.setValues(o),l(!1)},A=n=>{n.target.value.length<=s&&i.handleChange(n)};d.useEffect(()=>{i.setValues(o)},[o]);const S=()=>{h(L()).then(()=>{x(y.MAIN)}).catch(n=>{console.error("Logout failed:",n.message)}),v()};return e.jsxs($,{children:[e.jsx(H,{children:e.jsx(V,{children:"Profile"})}),e.jsxs(q,{children:[e.jsxs(D,{children:[e.jsx(X,{}),a&&e.jsx(m,{sx:{marginTop:"8px"},variant:"transparent",text:"Change photo"})]}),e.jsx(W,{children:C?e.jsx(R,{}):e.jsxs(Z,{onSubmit:i.handleSubmit,autoComplete:"off",children:[e.jsx(p,{props:u.userName,formik:i,disabled:!a,nolabel:"false",backgroundcolor:"var(--color-white)"},o.userName),e.jsx(p,{props:u.userEmail,formik:i,disabled:!a,nolabel:"false",backgroundcolor:"var(--color-white)"},o.userEmail),a?e.jsx(p,{props:u.about,formik:i,disabled:!a,nolabel:"false",backgroundcolor:"var(--color-white)",onChange:A,maxLength:s},o.about):e.jsxs(P,{children:[e.jsx(z,{htmlFor:"about",children:"About"}),e.jsx(G,{name:"about",children:i.values.about})]}),a&&e.jsxs(Y,{children:[e.jsx(m,{sx:{margin:"0"},variant:"outlined",text:"Cancel",handleClick:f}),e.jsx(m,{sx:{margin:"0"},handleClick:i.handleSubmit,type:"submit",text:"Update",variant:"contained"})]})]})}),e.jsx(Q,{onClick:a?f:_,children:a?e.jsx(K,{}):e.jsx(J,{})})]}),!a&&e.jsxs(ee,{onClick:S,children:[e.jsx(te,{}),"Log out"]})]})};export{he as default};
